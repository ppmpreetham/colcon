<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ColCon</title>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div style="margin-left: 65pt; margin-top: 25pt;">
        <div style="display: flex; align-items: center;">
            <div class="title">ColCon</div>

            <div class="item">
                <div class="coolinput">
                    <label for="foreground-color-input" class="text">Foreground Color</label>
                    <input type="text" id="foreground-color-input" placeholder="#000000" name="input" class="input" oninput="changeForegroundColor()">
                </div>
            </div>
            
            <div class="item">
                <div class="coolinput">
                    <label for="background-color-input" class="text">Background Color</label>
                    <input type="text" id="background-color-input" placeholder="#FFFFFF" name="input" class="input" oninput="changeBackgroundColor()">
                </div>
            </div>

            <div class="item">
                <div class="coolinput">
                    <label for="input" class="text">Font Family</label>
                    <input type="text" placeholder="Select your font" name="input" class="input">
                </div>
            </div>

            <div class="item">
                <div class="coolinput">
                    <label for="input" class="text">Font Size</label>
                    <input type="text" placeholder="32pt" name="input" class="input" oninput="changeFontSize()">
                </div>
            </div>
        </div>

        <div style="margin-top: 75pt;">
            <p id="content" style="font-family: inherit; font-size: 33pt; outline: none;" contenteditable spellcheck="false">ABCDEFGHIJKLMNOPQRSTUVWXYZ <br> abcdefghijklmnopqrstuvwxyz <br> The quick brown fox jumps over the lazy dog <br> ♠︎♣︎♥︎♦︎ </p>
        </div>

        <div class="right-text" style="font-size: 14pt;">Color Contrast</div>
        <div class="right contrast-ratio-container" style="font-size: 35pt;">21</div>
        
        <table class="right" style="border-collapse: collapse; float: right;">
            <thead>
                <tr>
                    <th style="padding: 8px; border: 1px solid #ccc;">Level</th>
                    <th style="padding: 8px; border: 1px solid #ccc;">Graphics</th>
                    <th style="padding: 8px; border: 1px solid #ccc;">Large Text</th>
                    <th style="padding: 8px; border: 1px solid #ccc;">Normal Text</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">AA</td>
                    <td id="aa-graphic" style="padding: 8px; border: 1px solid #ccc;"></td>
                    <td id="aa-large-text" style="padding: 8px; border: 1px solid #ccc;"></td>
                    <td id="aa-normal-text" style="padding: 8px; border: 1px solid #ccc;"></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">AAA</td>
                    <td id="aaa-graphic" style="padding: 8px; border: 1px solid #ccc;"></td>
                    <td id="aaa-large-text" style="padding: 8px; border: 1px solid #ccc;"></td>
                    <td id="aaa-normal-text" style="padding: 8px; border: 1px solid #ccc;"></td>
                </tr>
            </tbody>
        </table>
    </div>
  
    <script src="script.js"></script>
    <script>function changeForegroundColor() {
        const input = document.querySelector('input[oninput="changeForegroundColor()"]');
        const content = document.getElementById('content');
        const color = input.value.replace('#', '');
        if (/^[0-9A-F]{6}$/i.test(color)) {
          content.style.color = '#' + color;
        }
        updateContrastRatio();
    }
    
    function changeBackgroundColor() {
        const input = document.querySelector('input[oninput="changeBackgroundColor()"]');
        const body = document.querySelector('body');
        const color = input.value.replace('#', '');
        if (/^[0-9A-F]{6}$/i.test(color)) {
            body.style.backgroundColor = '#' + color;
        }

        updateContrastRatio();
    }

    const coolinputLabels = document.querySelectorAll('.coolinput label.text');
    coolinputLabels.forEach(label => {
      label.style.background = color;
    });

    function getLuminance(inputId) {
      const inputElement = document.getElementById(inputId);
      const color = inputElement.value.replace('#', '');
      const r = parseInt(color.substring(0, 2), 16) / 255;
      const g = parseInt(color.substring(2, 4), 16) / 255;
      const b = parseInt(color.substring(4, 6), 16) / 255;
      const R = r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4);
      const G = g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4);
      const B = b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);
      return 0.2126 * R + 0.7152 * G + 0.0722 * B;
    }

    function contrastRatio() {
        const L1 = getLuminance('foreground-color-input');
        const L2 = getLuminance('background-color-input');
        const ratio = (Math.max(L1, L2) + 0.05) / (Math.min(L1, L2) + 0.05);
        document.querySelector('.right').textContent = ratio.toFixed(2);
        return ratio.toFixed(2);
    }

    // Listen to the inputs

    const foregroundColorInput = document.getElementById('foreground-color-input');
    const backgroundColorInput = document.getElementById('background-color-input');
    const contrastRatioElement = document.querySelector('.contrast-ratio-container');

    foregroundColorInput.addEventListener('input', updateContrastRatio);
    backgroundColorInput.addEventListener('input', updateContrastRatio);

    function updateContrastRatio() {
        const ratio = contrastRatio();
        contrastRatioElement.textContent = `Color contrast: ${ratio}`;

    // Update the table based on the contrast ratio
    const aaGraphic = ratio >= 3 ? '&#10004;' : '&#10008;';
    const aaLargeText = ratio >= 3 ? '&#10004;' : '&#10008;';
    const aaNormalText = ratio >= 4.5 ? '&#10004;' : '&#10008;';
    const aaaGraphic = ratio >= 4.5 ? '&#10004;' : '&#10008;';
    const aaaLargeText = ratio >= 3 ? '&#10004;' : '&#10008;';
    const aaaNormalText = ratio >= 7 ? '&#10004;' : '&#10008;';

    document.getElementById('aa-graphic').innerHTML = aaGraphic;
    document.getElementById('aa-large-text').innerHTML = aaLargeText;
    document.getElementById('aa-normal-text').innerHTML = aaNormalText;
    document.getElementById('aaa-graphic').innerHTML = aaaGraphic;
    document.getElementById('aaa-large-text').innerHTML = aaaLargeText;
    document.getElementById('aaa-normal-text').innerHTML = aaaNormalText;
    }

    updateContrastRatio();

  </script>
</body>
</html>